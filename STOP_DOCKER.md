# üõë –ö–∞–∫ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker –ø—Ä–æ–µ–∫—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ Docker

### 1. –ù–∞–π—Ç–∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker ps

# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–≤–∫–ª—é—á–∞—è –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ)
docker ps -a
```

### 2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è docker-compose (–°–ê–ú–´–ô –ü–†–û–°–¢–û–ô –°–ü–û–°–û–ë)
cd /opt/barbitch-strapi  # –∏–ª–∏ –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è docker-compose.yml
docker-compose down

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã + volumes (–ë–î –¥–∞–Ω–Ω—ã–µ —Ç–æ–∂–µ —É–¥–∞–ª—è—Ç—Å—è!)
docker-compose down -v

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker stop CONTAINER_ID_OR_NAME

# –£–¥–∞–ª–∏—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker rm CONTAINER_ID_OR_NAME

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker stop $(docker ps -q)

# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker rm $(docker ps -a -q)
```

### 3. –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ Docker (–û–°–¢–û–†–û–ñ–ù–û!)

```bash
# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –æ–±—Ä–∞–∑—ã, volumes
docker system prune -a --volumes

# –ò–ª–∏ –ø–æ —á–∞—Å—Ç—è–º:
docker container prune  # –£–¥–∞–ª–∏—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker image prune -a   # –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã
docker volume prune     # –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ volumes
```

### 4. –û—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–æ—Ä—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—Ç 1350
sudo lsof -i :1350

# –ò–ª–∏ —á–µ—Ä–µ–∑ netstat
sudo netstat -tulpn | grep :1350

# –£–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É
sudo kill -9 PID_NUMBER
```

---

## –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@157.90.169.205
```

### –®–∞–≥ 2: –ù–∞–π–¥–∏ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏ Docker –ø—Ä–æ–µ–∫—Ç

```bash
# –ü–æ—Å–º–æ—Ç—Ä–∏ —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
docker ps

# –ï—Å–ª–∏ –µ—Å—Ç—å docker-compose.yml
cd /opt/barbitch-strapi  # –∏–ª–∏ –¥—Ä—É–≥–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–æ–µ–∫—Ç
docker-compose down

# –ï—Å–ª–∏ –Ω–µ—Ç docker-compose, –æ—Å—Ç–∞–Ω–æ–≤–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞–ø—Ä—è–º—É—é
docker stop barbitch-strapi  # –∑–∞–º–µ–Ω–∏ –Ω–∞ –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏–∑ docker ps
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ø–æ—Ä—Ç 1350 —Å–≤–æ–±–æ–¥–µ–Ω

```bash
sudo lsof -i :1350
# –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç - –ø–æ—Ä—Ç —Å–≤–æ–±–æ–¥–µ–Ω ‚úÖ
```

### –®–∞–≥ 4: –£–¥–∞–ª–∏ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker rm barbitch-strapi

# –£–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑
docker rmi IMAGE_NAME

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
docker system prune -a
```

### –®–∞–≥ 5: –û—Ç–∫–ª—é—á–∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ Nginx (–µ—Å–ª–∏ –±—ã–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è Docker)

```bash
# –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Ñ–∏–≥ Nginx
ls /etc/nginx/sites-enabled/

# –£–¥–∞–ª–∏ —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ñ–∏–≥ (–µ—Å–ª–∏ –µ—Å—Ç—å)
sudo rm /etc/nginx/sites-enabled/demo-strapi.barbitch.cz

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ Nginx
sudo systemctl reload nginx
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å—ë –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

```bash
# Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker ps  # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç–æ–π –∏–ª–∏ –±–µ–∑ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

# –ü–æ—Ä—Ç 1350
sudo lsof -i :1350  # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç–æ–π

# PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã
pm2 list  # –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–µ–∫—Ç—ã, –Ω–µ barbitch-strapi
```

---

## –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### Docker –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

```bash
# –§–æ—Ä—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
docker kill CONTAINER_ID

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Docker –¥–µ–º–æ–Ω–∞
sudo systemctl restart docker
```

### –ü–æ—Ä—Ç –≤—Å—ë –µ—â—ë –∑–∞–Ω—è—Ç

```bash
# –ù–∞–π–¥–∏ –ø—Ä–æ—Ü–µ—Å—Å
sudo lsof -i :1350

# –£–±–µ–π –ø—Ä–æ—Ü–µ—Å—Å
sudo kill -9 PID

# –ï—Å–ª–∏ —ç—Ç–æ Docker
docker stop $(docker ps -q --filter "publish=1350")
```

### Nginx –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Ñ–∏–≥
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ Nginx
sudo systemctl restart nginx

# –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏
sudo tail -f /var/log/nginx/error.log
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∫–æ–º–∞–Ω–¥ Docker –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –∏ –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç —Å PM2.
