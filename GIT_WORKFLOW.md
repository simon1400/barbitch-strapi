# üåø Git Workflow –¥–ª—è Oracle Cloud –¥–µ–ø–ª–æ—è

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ—Ç–æ–∫

```
main            - –û—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–ª–æ–∫–∞–ª—å–Ω–∞—è)
  ‚îî‚îÄ‚îÄ oracleDeploy  - Production –≤–µ—Ç–∫–∞ –¥–ª—è Oracle Cloud
```

---

## üîÑ Workflow

### 1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–ª–æ–∫–∞–ª—å–Ω–æ)

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–µ–ª–∞—é—Ç—Å—è –≤ –≤–µ—Ç–∫–µ `main`:

```bash
# –†–∞–±–æ—Ç–∞–µ–º –≤ main
git checkout main

# –î–µ–ª–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
# ... —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã ...

# –ö–æ–º–º–∏—Ç–∏–º
git add .
git commit -m "Add new feature"
git push origin main
```

### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é

–ö–æ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã –∫ –¥–µ–ø–ª–æ—é, –º–µ—Ä–¥–∂–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `oracleDeploy`:

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ production –≤–µ—Ç–∫—É
git checkout oracleDeploy

# –ú–µ—Ä–¥–∂–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ main
git merge main

# –ü—É—à–∏–º –≤ GitHub
git push origin oracleDeploy
```

### 3. –î–µ–ø–ª–æ–π –Ω–∞ Oracle Cloud

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ Oracle Cloud:

```bash
# SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh -i your-key.key ubuntu@YOUR_IP

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /opt/barbitch-strapi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –Ω–∞—Ö–æ–¥–∏–º—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–µ—Ç–∫–µ
git branch

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ oracleDeploy
sudo git checkout oracleDeploy

# –ó–∞–ø—É—Å–∫–∞–µ–º –¥–µ–ø–ª–æ–π (—Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–¥–µ–ª–∞–µ—Ç git pull)
sudo ./deploy.sh
```

---

## üéØ –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ –Ω–∞ Oracle Cloud:

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
cd /opt/barbitch-strapi
sudo git clone https://github.com/YOUR_USERNAME/barbitch-strapi.git .

# 2. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ production –≤–µ—Ç–∫—É
sudo git checkout oracleDeploy

# 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –Ω–∞—Ö–æ–¥–∏–º—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–µ—Ç–∫–µ
git branch
# –í—ã–≤–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
# * oracleDeploy
#   main

# 4. –°–æ–∑–¥–∞–µ–º .env —Ñ–∞–π–ª
sudo nano .env
# –í—Å—Ç–∞–≤—å—Ç–µ production –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

# 5. –ó–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π
sudo ./deploy.sh
```

---

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π –≤–µ—Ç–∫–∏

```bash
git branch
# * oracleDeploy  <- —Ç–µ–∫—É—â–∞—è –≤–µ—Ç–∫–∞ –æ—Ç–º–µ—á–µ–Ω–∞ –∑–≤–µ–∑–¥–æ—á–∫–æ–π
#   main
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã
git log --oneline -10

# –°—Ä–∞–≤–Ω–∏—Ç—å —Å main
git log main..oracleDeploy --oneline
```

### –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

```bash
# –û—Ç–∫–∞—Ç–∏—Ç—å –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–º–º–∏—Ç
sudo git reset --hard HEAD~1

# –û—Ç–∫–∞—Ç–∏—Ç—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–º–º–∏—Ç
sudo git reset --hard <commit-hash>

# –ó–∞—Ç–µ–º –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
sudo ./deploy.sh
```

---

## üìä –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –û–±—ã—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

**–õ–æ–∫–∞–ª—å–Ω–æ:**
```bash
# 1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤ main
git checkout main
# ... –¥–µ–ª–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è ...
git add .
git commit -m "Update feature X"
git push origin main

# 2. –ú–µ—Ä–¥–∂–∏–º –≤ production –≤–µ—Ç–∫—É
git checkout oracleDeploy
git merge main
git push origin oracleDeploy
```

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
# 3. –î–µ–ø–ª–æ–∏–º –Ω–∞ Oracle Cloud
ssh ubuntu@YOUR_IP
cd /opt/barbitch-strapi
sudo ./deploy.sh  # –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–¥–µ–ª–∞–µ—Ç git pull –∏–∑ oracleDeploy
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: Hotfix –Ω–∞ production

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å—Ä–æ—á–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —á—Ç–æ-—Ç–æ –Ω–∞ production:

**–õ–æ–∫–∞–ª—å–Ω–æ:**
```bash
# 1. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ oracleDeploy
git checkout oracleDeploy

# 2. –î–µ–ª–∞–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
# ... —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã ...
git add .
git commit -m "Hotfix: fix critical bug"
git push origin oracleDeploy

# 3. –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ—Ç–æ–º —Å–º–µ—Ä–¥–∂–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –≤ main!
git checkout main
git merge oracleDeploy
git push origin main
```

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
sudo ./deploy.sh
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏

–ï—Å–ª–∏ –Ω–æ–≤—ã–π –¥–µ–ø–ª–æ–π —Å–ª–æ–º–∞–ª —á—Ç–æ-—Ç–æ:

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
# 1. –°–º–æ—Ç—Ä–∏–º –∏—Å—Ç–æ—Ä–∏—é
git log --oneline -10

# 2. –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º—Å—è –Ω–∞ —Ä–∞–±–æ—á—É—é –≤–µ—Ä—Å–∏—é
sudo git reset --hard <commit-hash-—Ä–∞–±–æ—á–µ–π-–≤–µ—Ä—Å–∏–∏>

# 3. –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º
sudo ./deploy.sh
```

**–õ–æ–∫–∞–ª—å–Ω–æ (–ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∏—Å–ø—Ä–∞–≤–∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—É):**
```bash
# –§–æ—Ä—Å–∏–º –ø—É—à –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏
git push origin oracleDeploy --force
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### ‚ùå –ù–ï –¥–µ–ª–∞–π—Ç–µ:

1. **–ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ .env —Ñ–∞–π–ª** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏
   - `.env` —É–∂–µ –≤ `.gitignore`
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env.production.example` –∫–∞–∫ —à–∞–±–ª–æ–Ω

2. **–ù–ï –¥–µ–ª–∞–π—Ç–µ force push –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏**
   ```bash
   # ‚ùå –û–ø–∞—Å–Ω–æ!
   git push --force
   ```

3. **–ù–ï —Ä–∞–±–æ—Ç–∞–π—Ç–µ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ** (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤)
   - –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ —á–µ—Ä–µ–∑ git
   - –ò–Ω–∞—á–µ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –¥–µ–ø–ª–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ç–µ—Ä—è—é—Ç—Å—è

### ‚úÖ –î–µ–ª–∞–π—Ç–µ:

1. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤–µ—Ç–∫—É** –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
   ```bash
   git branch  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ç–∫—É
   ```

2. **–î–µ–ª–∞–π—Ç–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ commit —Å–æ–æ–±—â–µ–Ω–∏—è**
   ```bash
   # ‚úÖ –•–æ—Ä–æ—à–æ
   git commit -m "Add user authentication feature"

   # ‚ùå –ü–ª–æ—Ö–æ
   git commit -m "fix"
   ```

3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ** –ø–µ—Ä–µ–¥ –ø—É—à–µ–º –≤ oracleDeploy

---

## üîê –†–∞–±–æ—Ç–∞ —Å .env —Ñ–∞–π–ª–æ–º

### –õ–æ–∫–∞–ª—å–Ω–æ (main –≤–µ—Ç–∫–∞)
```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î –∏–ª–∏ dev –ë–î
DATABASE_HOST=localhost
URL=http://localhost:1350
ADMIN_URL=http://localhost:1350/admin
```

### Production (oracleDeploy –≤–µ—Ç–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ–º production –ë–î –∏ –¥–æ–º–µ–Ω
DATABASE_HOST=aws-0-eu-central-1.pooler.supabase.com
URL=https://demo-strapi.barbitch.cz
ADMIN_URL=https://demo-strapi.barbitch.cz/admin
STRAPI_ADMIN_BACKEND_URL=https://demo-strapi.barbitch.cz
NODE_ENV=production
```

**–í–∞–∂–Ω–æ:** `.env` —Ñ–∞–π–ª –ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ git!

---

## üì± –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è

–ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –ø—Ä–∏ –ø—É—à–µ –≤ `oracleDeploy`:

```yaml
# .github/workflows/deploy.yml
name: Deploy to Oracle Cloud

on:
  push:
    branches:
      - oracleDeploy

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to Oracle Cloud
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.ORACLE_HOST }}
          username: ubuntu
          key: ${{ secrets.SSH_PRIVATE_KEY }}
          script: |
            cd /opt/barbitch-strapi
            sudo ./deploy.sh
```

–ù–æ —ç—Ç–æ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - –º–æ–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å –≤—Ä—É—á–Ω—É—é.

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ merge

```bash
# –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ git merge main
git checkout oracleDeploy
git merge main

# –ü–æ—è–≤–∏–ª–∏—Å—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
# CONFLICT (content): Merge conflict in config/admin.ts

# –†–µ—à–∞–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤—Ä—É—á–Ω—É—é
nano config/admin.ts  # –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª, —É–¥–∞–ª—è–µ–º –º–∞—Ä–∫–µ—Ä—ã <<< === >>>

# –ö–æ–º–º–∏—Ç–∏–º —Ä–µ—à–µ–Ω–∏–µ
git add .
git commit -m "Resolve merge conflicts"
git push origin oracleDeploy
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä–≤–µ—Ä –Ω–µ –≤–∏–¥–∏—Ç –Ω–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /opt/barbitch-strapi

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–µ—Ç–∫–µ
git branch

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–æ–ª—É—á–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
sudo git fetch origin
sudo git reset --hard origin/oracleDeploy

# –î–µ–ø–ª–æ–π
sudo ./deploy.sh
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª—É—á–∞–π–Ω–æ –∑–∞–∫–æ–º–º–∏—Ç–∏–ª–∏ –≤ main –≤–º–µ—Å—Ç–æ oracleDeploy

```bash
# –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! oracleDeploy –º–µ—Ä–¥–∂–∏—Ç—Å—è –∏–∑ main
# –ü—Ä–æ—Å—Ç–æ —Å–º–µ—Ä–¥–∂–∏—Ç–µ main –≤ oracleDeploy:
git checkout oracleDeploy
git merge main
git push origin oracleDeploy
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–µ–ø–ª–æ—è](./ORACLE_CLOUD_SETUP.md)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](./QUICK_START.md)
- [–°–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π](./CHANGES_SUMMARY.md)

---

**–°–ª–µ–¥—É—è —ç—Ç–æ–º—É workflow, –≤—ã –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç–µ –∑–Ω–∞—Ç—å –∫–∞–∫–∞—è –≤–µ—Ä—Å–∏—è –∫–æ–¥–∞ –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è!** üéØ
